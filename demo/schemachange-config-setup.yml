config-version: 1

# tracking the setup step in a different change history table to use schemachange setup and teardown separate from deployment.
# Uses MY_TARGET_SCHEMA which includes run_number and job_index to avoid parallel job conflicts.
change-history-table: "{{ env_var('SNOWFLAKE_DATABASE')}}.SCHEMACHANGE.{{ env_var('MY_TARGET_SCHEMA')}}_CHANGE_HISTORY"
create-change-history-table: true
initial-deployment: true  # Each test run creates a fresh schema, so this is always an initial deployment

vars:
  database_name: "{{env_var('SNOWFLAKE_DATABASE')}}"
  schema_name: "{{env_var('MY_TARGET_SCHEMA')}}"
